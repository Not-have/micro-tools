<script lang="ts" setup>
import {
  computed
} from "vue";

// è·å–å½“å‰æ—¶é—´
const currentTime = computed(() => new Date().toLocaleString());

// è·å– Node.js ç‰ˆæœ¬ä¿¡æ¯
const nodeVersion = computed(() => (typeof process === "undefined" ? "N/A (æµè§ˆå™¨ç¯å¢ƒ)" : process.version));

// è·å–å·¥ä½œç›®å½•
const workingDirectory = computed(() => (typeof process === "undefined" ? "N/A (æµè§ˆå™¨ç¯å¢ƒ)" : process.cwd()));

// è·å–ç”¨æˆ·ä»£ç†
const userAgent = computed(() => navigator.userAgent);
</script>

<template>
  <div class="debug-container">
    <h1>ğŸš€ Storybook Vue CLI è°ƒè¯•ä¿¡æ¯</h1>

    <div class="section">
      <h2>ğŸ“‹ å½“å‰çŠ¶æ€</h2>
      <p>âœ… Storybook å·²æˆåŠŸå¯åŠ¨</p>
      <p>âœ… CLI å·¥å…·è¿è¡Œæ­£å¸¸</p>
    </div>

    <div class="section">
      <h2>ğŸ” å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>

      <div class="problem-item">
        <h3>âŒ é—®é¢˜1: ç¯å¢ƒå˜é‡æœªè®¾ç½®</h3>
        <p>å¦‚æœä¸Šé¢æ˜¾ç¤º"æœªè®¾ç½®"ï¼Œè¯´æ˜ç¯å¢ƒå˜é‡æ²¡æœ‰æ­£ç¡®ä¼ é€’ã€‚</p>
        <p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
        <ul>
          <li>ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ <code>mt-storybook-vue</code></li>
          <li>æ£€æŸ¥é¡¹ç›®æ˜¯å¦æœ‰ <code>stories/</code> ç›®å½•</li>
          <li>é‡æ–°æ„å»º CLI å·¥å…·: <code>pnpm build</code></li>
        </ul>
      </div>

      <div class="problem-item">
        <h3>âŒ é—®é¢˜2: Stories æ–‡ä»¶è·¯å¾„é”™è¯¯</h3>
        <p>å¦‚æœè·¯å¾„æŒ‡å‘äº†é”™è¯¯çš„ä½ç½®ã€‚</p>
        <p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
        <ul>
          <li>æ£€æŸ¥ç›®æ ‡è·¯å¾„æ˜¯å¦å­˜åœ¨: <code>stories/</code></li>
          <li>ç¡®ä¿ stories æ–‡ä»¶æ ¼å¼æ­£ç¡®: <code>*.stories.@(js|mjs|ts|vue)</code></li>
          <li>æ£€æŸ¥æ–‡ä»¶æƒé™</li>
        </ul>
      </div>

      <div class="problem-item">
        <h3>âŒ é—®é¢˜3: å¤šä¸ªé¡¹ç›®åŒæ—¶å¯åŠ¨å†²çª</h3>
        <p>å¦‚æœå¤šä¸ªé¡¹ç›®åŒæ—¶è¿è¡Œå¯¼è‡´å†²çªã€‚</p>
        <p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
        <ul>
          <li>æ¯ä¸ªé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ç«¯å£: <code>--port 6007</code></li>
          <li>ç¡®ä¿æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„ stories ç›®å½•</li>
          <li>æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»– Storybook è¿›ç¨‹åœ¨è¿è¡Œ</li>
        </ul>
      </div>

      <div class="problem-item">
        <h3>âŒ é—®é¢˜4: ä¾èµ–é—®é¢˜</h3>
        <p>å¦‚æœ Storybook ç›¸å…³ä¾èµ–ç¼ºå¤±ã€‚</p>
        <p><strong>è§£å†³æ–¹æ¡ˆ:</strong></p>
        <ul>
          <li>ç¡®ä¿å®‰è£…äº† <code>@mt-kit/storybook-vue</code></li>
          <li>æ£€æŸ¥ <code>package.json</code> ä¸­çš„ä¾èµ–</li>
          <li>è¿è¡Œ <code>pnpm install</code> é‡æ–°å®‰è£…ä¾èµ–</li>
        </ul>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ› ï¸ è°ƒè¯•å‘½ä»¤</h2>
      <div class="code-block">
        <p><code># æ£€æŸ¥ stories æ–‡ä»¶æ˜¯å¦å­˜åœ¨</code></p>
        <p><code>ls -la stories/</code></p>
        <br />
        <p><code># æ£€æŸ¥é¡¹ç›®ç»“æ„</code></p>
        <p><code>ls -la</code></p>
        <br />
        <p><code># é‡æ–°å¯åŠ¨</code></p>
        <p><code>pkill -f storybook && mt-storybook-vue</code></p>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ“ è·å–å¸®åŠ©</h2>
      <p>å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ï¼š</p>
      <ul>
        <li>æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºçš„å®Œæ•´é”™è¯¯ä¿¡æ¯</li>
        <li>æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯</li>
        <li>ç¡®ä¿é¡¹ç›®ç»“æ„ç¬¦åˆè¦æ±‚</li>
      </ul>
    </div>

    <div class="footer-info">
      <p>å½“å‰æ—¶é—´: {{ currentTime }}</p>
      <p>Node.js ç‰ˆæœ¬: {{ nodeVersion }}</p>
      <p>å·¥ä½œç›®å½•: {{ workingDirectory }}</p>
      <p>ç”¨æˆ·ä»£ç†: {{ userAgent }}</p>
    </div>
  </div>
</template>

<style scoped>
.debug-container {
  padding: 20px;
  font-family: monospace;
}

.section {
  margin-bottom: 20px;
}

.problem-item {
  margin-bottom: 15px;
}

.code-block {
  padding: 10px;
  border-radius: 4px;
  background-color: #f5f5f5;
}

.footer-info {
  margin-top: 30px;
  font-size: 12px;
  color: #666;
}

h1 {
  margin-top: 0;
}

h2 {
  margin-bottom: 10px;
}

h3 {
  margin-bottom: 8px;
}

p {
  margin-bottom: 8px;
}

ul {
  margin-bottom: 8px;
}

li {
  margin-bottom: 4px;
}

code {
  padding: 2px 4px;
  border-radius: 2px;
  background-color: #f0f0f0;
  font-family: monospace;
}

br {
  line-height: 1.5;
}
</style>
